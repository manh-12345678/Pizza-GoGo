<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω ƒë√°nh gi√°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .star-rating { color: #ffc107; white-space: nowrap; } /* M√†u v√†ng bootstrap */
        .deleted-row td {
            opacity: 0.6;
            /* text-decoration: line-through; */ /* B·ªè g·∫°ch ngang n·∫øu kh√¥ng th√≠ch */
        }
        .table-hover tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.075); /* Hi·ªáu ·ª©ng hover nh·∫π */
        }
        body { background-color: #212529; color: #dee2e6; } /* N·ªÅn t·ªëi */
        .table { --bs-table-bg: #343a40; --bs-table-striped-bg: #454d55; --bs-table-color: #fff; border-color: #454d55; } /* B·∫£ng n·ªÅn t·ªëi */
        .card { background-color: #343a40; } /* Card n·ªÅn t·ªëi */
        h2 { color: #fff; }
    </style>
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4 text-light"><i class="bi bi-stars"></i> Qu·∫£n l√Ω ƒë√°nh gi√° üëë</h2>

    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
        <span th:text="${successMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <span th:text="${errorMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="table-responsive shadow-sm rounded">
        <table class="table table-striped table-bordered table-hover align-middle">
            <thead class="table-dark">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">ƒê∆°n h√†ng</th>
                <th scope="col">T√†i kho·∫£n</th>
                <th scope="col">Rating</th>
                <th scope="col">B√¨nh lu·∫≠n</th>
                <th scope="col">Ng√†y t·∫°o</th>
                <th scope="col">Tr·∫°ng th√°i</th>
                <th scope="col" class="text-center">H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="review : ${reviews}" th:classappend="${review.isDeleted} ? 'deleted-row'">
                <td th:text="${review.reviewId}" class="fw-bold"></td>
                <td>
                    <a th:href="@{/manager/orders/details/{id}(id=${review.order?.orderId})}"
                       th:text="'#' + ${review.order?.orderId}"
                       class="link-light"></a> </td>
                <td th:text="${review.account?.username} ?: (${review.account?.fullName} ?: 'N/A')"></td>
                <td class="star-rating text-nowrap">
                    <span th:each="i : ${#numbers.sequence(1, review.rating)}">‚òÖ</span><span style="color: #6c757d;"> <span th:each="i : ${#numbers.sequence(1, 5 - review.rating)}">‚òÖ</span></span>
                </td>
                <td style="min-width: 200px;" th:text="${review.comment}"></td>
                <td class="text-nowrap" th:text="${#temporals.format(review.createdAt, 'dd/MM/yy HH:mm')}"></td>
                <td class="text-center">
                    <span th:if="${review.isDeleted}" class="badge bg-secondary">ƒê√£ ·∫©n</span>
                    <span th:unless="${review.isDeleted}" class="badge bg-success">Hi·ªÉn th·ªã</span>
                </td>
                <td class="text-center">
                    <form th:action="@{/reviews/delete/{id}(id=${review.reviewId})}" method="post" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ·∫©n ƒë√°nh gi√° n√†y kh·ªèi ng∆∞·ªùi d√πng?');" style="display: inline;" th:if="${!review.isDeleted}">
                        <button type="submit" class="btn btn-warning btn-sm" title="·∫®n ƒë√°nh gi√°">
                            <i class="bi bi-eye-slash"></i> ·∫®n
                        </button>
                    </form>
                    <form th:action="@{/reviews/restore/{id}(id=${review.reviewId})}" method="post" style="display: inline;" th:if="${review.isDeleted}">
                        <button type="submit" class="btn btn-info btn-sm" title="Hi·ªán l·∫°i ƒë√°nh gi√°">
                            <i class="bi bi-eye"></i> Hi·ªán
                        </button>
                    </form>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(reviews)}">
                <td colspan="8" class="text-center fst-italic py-4">Ch∆∞a c√≥ ƒë√°nh gi√° n√†o.</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>