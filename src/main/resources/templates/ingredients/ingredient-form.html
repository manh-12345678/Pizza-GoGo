<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{manager/fragments/layout :: managerHead('Thêm/Sửa Nguyên vật liệu', ~{::extraHead})}">
    <th:block th:fragment="extraHead">
        <style>
            .form-label {
                font-weight: 600;
                color: #1e293b;
                margin-bottom: 8px;
            }
            .form-control, .form-select {
                border: 1px solid #cbd5e1;
                border-radius: 8px;
                padding: 10px 14px;
            }
            .form-control:focus, .form-select:focus {
                border-color: #3b82f6;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }
        </style>
    </th:block>
</head>
<body>
<div th:replace="~{manager/fragments/layout :: managerLayout('ingredients', ~{::pageContent})}">
    <div th:fragment="pageContent">
        <div class="container px-0">
            <h2 class="mb-4">
                <i class="bi bi-box-seam"></i> 
                <span th:text="${isEdit ? 'Sửa Nguyên vật liệu' : 'Thêm Nguyên vật liệu mới'}"></span>
            </h2>

            <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="bi bi-check-circle"></i> <span th:text="${successMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="bi bi-exclamation-triangle"></i> <span th:text="${errorMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <div class="card shadow-sm">
                <div class="card-body">
                    <form th:action="${isEdit ? '/manager/ingredients/edit/' + ingredientDTO.ingredientId : '/manager/ingredients/add'}"
                          th:object="${ingredientDTO}" method="post">
                        
                        <input type="hidden" th:field="*{ingredientId}" th:if="${isEdit}"/>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="name" class="form-label">Tên nguyên vật liệu <span class="text-danger">*</span></label>
                                <input type="text" 
                                       class="form-control" 
                                       id="name" 
                                       th:field="*{name}" 
                                       placeholder="Ví dụ: Bột mì, Phô mai, Thịt bò..."
                                       required>
                                <div class="form-text">Tên của nguyên vật liệu</div>
                            </div>
                            <div class="col-md-6">
                                <label for="unit" class="form-label">Đơn vị <span class="text-danger">*</span></label>
                                <select class="form-select" id="unit" th:field="*{unit}" required>
                                    <option value="">-- Chọn đơn vị --</option>
                                    <option value="kg">Kilogram (kg)</option>
                                    <option value="g">Gram (g)</option>
                                    <option value="l">Liter (l)</option>
                                    <option value="ml">Milliliter (ml)</option>
                                    <option value="pcs">Cái (pcs)</option>
                                    <option value="thùng">Thùng</option>
                                    <option value="túi">Túi</option>
                                    <option value="hộp">Hộp</option>
                                </select>
                                <div class="form-text">Đơn vị đo lường</div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="stockQuantity" class="form-label">Số lượng tồn kho <span class="text-danger">*</span></label>
                                <input type="number" 
                                       class="form-control" 
                                       id="stockQuantity" 
                                       th:field="*{stockQuantity}" 
                                       step="0.01" 
                                       min="0"
                                       placeholder="0.00"
                                       required>
                                <div class="form-text">Số lượng hiện có trong kho</div>
                            </div>
                            <div class="col-md-4">
                                <label for="unitPrice" class="form-label">Giá vốn (đơn vị)</label>
                                <input type="number" 
                                       class="form-control" 
                                       id="unitPrice" 
                                       th:field="*{unitPrice}" 
                                       step="0.01" 
                                       min="0"
                                       placeholder="0.00">
                                <div class="form-text">Giá mua vào mỗi đơn vị (để tính chi phí)</div>
                            </div>
                            <div class="col-md-4">
                                <label for="minimumStock" class="form-label">Tồn kho tối thiểu</label>
                                <input type="number" 
                                       class="form-control" 
                                       id="minimumStock" 
                                       th:field="*{minimumStock}" 
                                       step="0.01" 
                                       min="0"
                                       placeholder="0.00">
                                <div class="form-text">Mức tồn kho tối thiểu để cảnh báo</div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between mt-4">
                            <a th:href="@{/manager/ingredients/manage}" class="btn btn-secondary">
                                <i class="bi bi-arrow-left"></i> Quay lại
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i>
                                <span th:text="${isEdit ? 'Cập nhật' : 'Thêm mới'}"></span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<th:block th:replace="~{manager/fragments/layout :: managerScripts(~{manager/fragments/layout :: emptyScripts})}"></th:block>
</body>
</html>
